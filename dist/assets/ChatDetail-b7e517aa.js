import{A as Mn,B as ue,C as le,D as fe,l as q,p as de,E as me,j as v,_ as j,F as pe,G,q as D,n as he,R as ge,v as jn,m as Ln,w as Tn,H as Vn,t as In,I as On,J as zn,K as Dn,L as Wn,__tla as Hn}from"./index-21dc63e8.js";import{a as s}from"./react-f96d03bb.js";import{c as Bn,I as Nn,__tla as $n}from"./BotArea-f5f41e39.js";import{L as Fn,__tla as Xn}from"./Layout-a403add4.js";let vt,xt,W,ye,L,J,H,wt,bt,B,Et,_t,K,Q,Ct,Rt,St,tt,At,et,nt,Pt,rt,at,kt,st,ve,xe,we,Mt,be,N,jt,Lt,Ee,Tt,_e,Ce,_,Vt,$,C,F,f,It,Re,ot,Ot,R,Se,Ae,Pe,it,Yn=Promise.all([(()=>{try{return Hn}catch{}})(),(()=>{try{return $n}catch{}})(),(()=>{try{return Xn}catch{}})()]).then(async()=>{function zt(t,e){const n=Mn(e);return s.useEffect(()=>n.sub(t,()=>{}),[n,t]),[s.useCallback(()=>n.get(t),[n,t]),s.useCallback((...r)=>{if((a=>!!a.write)(t))return n.set(t,...r);throw new Error("not writable atom")},[n,t])]}let ct,Dt;ct=t=>ue(s.useMemo(()=>le(e=>e(fe).get(t)),[t])),Dt=t=>ue(s.useMemo(()=>le(e=>e(me).get(t)),[t])),xe=t=>{const e=q(de),[n]=ct(t),[r]=zt(me);return s.useMemo(()=>{const a=n?.messages.reduce((o,i)=>{const c=r().get(i);return c&&o.push(c),o},[])??[];return e.estimateTokenCount(a)},[e,n?.messages,r])},Ot=function(t){const e=s.useRef(t);return e.current=t,s.useMemo(()=>Object.freeze({get current(){return e.current}}),[])};const ke=typeof window<"u"&&typeof navigator<"u"&&typeof document<"u";let X;function Me(){if(!ke)return;if(X)return X;const t=new Map,e=new ResizeObserver(n=>{n.forEach(r=>t.get(r.target)?.forEach(a=>setTimeout(()=>a(r),0)))});return X={observer:e,subscribe:(n,r)=>{let a=t.get(n);a||(a=new Set,t.set(n,a),e.observe(n)),a.add(r)},unsubscribe:(n,r)=>{const a=t.get(n);a&&(a.delete(r),a.size||(t.delete(n),e.unobserve(n)))}},X}function je(t,e,n=!0){const r=n&&Me(),a=Ot(e),o=t&&"current"in t?t.current:t;s.useEffect(()=>{const i=t&&"current"in t?t.current:t;if(!r||!i)return;let c=!0;const d=(...u)=>{c&&a.current(...u)};return r.subscribe(i,d),()=>{c=!1,r.unsubscribe(i,d)}},[o,r])}const Le=Bn("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var Te="ppg23g0",Ve="ppg23g1";let Wt,T,Y,V;Wt=s.memo(({id:t,onChange:e,placeholder:n="Untitled",value:r,...a})=>{const o=s.useDeferredValue(r);return v.jsx("div",{id:t,className:Te,children:v.jsx("input",{className:Ve,type:"text",placeholder:n,value:o,onChange:e,translate:"no",spellCheck:"false",autoCorrect:"off",autoComplete:"off","aria-autocomplete":"none",...a})})}),rt=s.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),T=s.createContext({}),Y=s.createContext(null),J=typeof document<"u",V=J?s.useLayoutEffect:s.useEffect,st=s.createContext({strict:!1});function Ie(t,e,n,r){const{visualElement:a}=s.useContext(T),o=s.useContext(st),i=s.useContext(Y),c=s.useContext(rt).reducedMotion,d=s.useRef();r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:c}));const u=d.current;return s.useInsertionEffect(()=>{u&&u.update(n,i)}),V(()=>{u&&u.render()}),s.useEffect(()=>{u&&u.updateFeatures()}),(window.HandoffAppearAnimations?V:s.useEffect)(()=>{u&&u.animationState&&u.animationState.animateChanges()}),u}bt=function(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")};function Oe(t,e,n){return s.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):bt(n)&&(n.current=r))},[e])}W=function(t){return typeof t=="string"||Array.isArray(t)},it=function(t){return typeof t=="object"&&typeof t.start=="function"},xt=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Et=["initial",...xt],H=function(t){return it(t.animate)||Et.some(e=>W(t[e]))},wt=function(t){return!!(H(t)||t.variants)};function ze(t,e){if(H(t)){const{initial:n,animate:r}=t;return{initial:n===!1||W(n)?n:void 0,animate:W(r)?r:void 0}}return t.inherit!==!1?e:{}}function De(t){const{initial:e,animate:n}=ze(t,s.useContext(T));return s.useMemo(()=>({initial:e,animate:n}),[Ht(e),Ht(n)])}function Ht(t){return Array.isArray(t)?t.join(" "):t}let ut;ut={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},B={};for(const t in ut)B[t]={isEnabled:e=>ut[t].some(n=>!!e[n])};kt=function(t){for(const e in t)B[e]={...B[e],...t[e]}};const Bt=s.createContext({}),We=s.createContext({}),He=Symbol.for("motionComponentSymbol");function Be({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:a}){t&&kt(t);function o(c,d){let u;const m={...s.useContext(rt),...c,layoutId:Ne(c)},{isStatic:l}=m,p=De(c),h=r(c,l);if(!l&&J){p.visualElement=Ie(a,h,m,e);const x=s.useContext(We),b=s.useContext(st).strict;p.visualElement&&(u=p.visualElement.loadFeatures(m,b,t,x))}return s.createElement(T.Provider,{value:p},u&&p.visualElement?s.createElement(u,{visualElement:p.visualElement,...m}):null,n(a,c,Oe(h,p.visualElement,d),h,l,p.visualElement))}const i=s.forwardRef(o);return i[He]=a,i}function Ne({layoutId:t}){const e=s.useContext(Bt).id;return e&&t!==void 0?e+"-"+t:t}function $e(t){function e(r,a={}){return Be(t(r,a))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,a)=>(n.has(a)||n.set(a,e(a)),n.get(a))})}const Fe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];nt=function(t){return typeof t!="string"||t.includes("-")?!1:!!(Fe.indexOf(t)>-1||/[A-Z]/.test(t))};let Nt;Nt={},L=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ot=new Set(L);function $t(t,{layout:e,layoutId:n}){return ot.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Nt[t]||t==="opacity")}let Ft,Xt;C=t=>!!(t&&t.getVelocity),Ft={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Xt=L.length;function Xe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,a){let o="";for(let i=0;i<Xt;i++){const c=L[i];if(t[c]!==void 0){const d=Ft[c]||c;o+=`${d}(${t[c]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),a?o=a(t,r?"":o):n&&r&&(o="none"),o}let lt,Yt,I;lt=t=>e=>typeof e=="string"&&e.startsWith(t),_t=lt("--"),ye=lt("var(--"),_e=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Yt=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Lt=(t,e,n)=>Math.min(Math.max(n,t),e),$={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},N={...$,transform:t=>Lt(0,1,t)},I={...$,default:1},be=t=>Math.round(t*1e5)/1e5,we=/(-)?([\d]*\.?[\d])+/g,Ee=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Re=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i,Tt=function(t){return typeof t=="string"};let A,ft,dt;A=t=>({test:e=>Tt(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),R=A("deg"),F=A("%"),f=A("px"),Ae=A("vh"),Se=A("vw"),ft={...F,parse:t=>F.parse(t)/100,transform:t=>F.transform(t*100)},dt={...$,transform:Math.round},Vt={borderWidth:f,borderTopWidth:f,borderRightWidth:f,borderBottomWidth:f,borderLeftWidth:f,borderRadius:f,radius:f,borderTopLeftRadius:f,borderTopRightRadius:f,borderBottomRightRadius:f,borderBottomLeftRadius:f,width:f,maxWidth:f,height:f,maxHeight:f,size:f,top:f,right:f,bottom:f,left:f,padding:f,paddingTop:f,paddingRight:f,paddingBottom:f,paddingLeft:f,margin:f,marginTop:f,marginRight:f,marginBottom:f,marginLeft:f,rotate:R,rotateX:R,rotateY:R,rotateZ:R,scale:I,scaleX:I,scaleY:I,scaleZ:I,skew:R,skewX:R,skewY:R,distance:f,translateX:f,translateY:f,translateZ:f,x:f,y:f,z:f,perspective:f,transformPerspective:f,opacity:N,originX:ft,originY:ft,originZ:f,zIndex:dt,fillOpacity:N,strokeOpacity:N,numOctaves:dt},K=function(t,e,n,r){const{style:a,vars:o,transform:i,transformOrigin:c}=t;let d=!1,u=!1,m=!0;for(const l in e){const p=e[l];if(_t(l)){o[l]=p;continue}const h=Vt[l],x=Yt(p,h);if(ot.has(l)){if(d=!0,i[l]=x,!m)continue;p!==(h.default||0)&&(m=!1)}else l.startsWith("origin")?(u=!0,c[l]=x):a[l]=x}if(e.transform||(d||r?a.transform=Xe(t.transform,n,m,r):a.transform&&(a.transform="none")),u){const{originX:l="50%",originY:p="50%",originZ:h=0}=c;a.transformOrigin=`${l} ${p} ${h}`}};const mt=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Zt(t,e,n){for(const r in e)!C(e[r])&&!$t(r,n)&&(t[r]=e[r])}function Ye({transformTemplate:t},e,n){return s.useMemo(()=>{const r=mt();return K(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function Ze(t,e,n){const r=t.style||{},a={};return Zt(a,r,t),Object.assign(a,Ye(t,e,n)),t.transformValues?t.transformValues(a):a}function Ue(t,e,n){const r={},a=Ze(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=a,r}const qe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Z(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||qe.has(t)}let Ut=t=>!Z(t);Pt=function(t){t&&(Ut=e=>e.startsWith("on")?!Z(e):t(e))};try{Pt(require("@emotion/is-prop-valid").default)}catch{}function Ge(t,e,n){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(Ut(a)||n===!0&&Z(a)||!e&&!Z(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}function qt(t,e,n){return typeof t=="string"?t:f.transform(e+n*t)}function Je(t,e,n){const r=qt(e,t.x,t.width),a=qt(n,t.y,t.height);return`${r} ${a}`}const Ke={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qe={offset:"strokeDashoffset",array:"strokeDasharray"};function tn(t,e,n=1,r=0,a=!0){t.pathLength=1;const o=a?Ke:Qe;t[o.offset]=f.transform(-r);const i=f.transform(e),c=f.transform(n);t[o.array]=`${i} ${c}`}tt=function(t,{attrX:e,attrY:n,attrScale:r,originX:a,originY:o,pathLength:i,pathSpacing:c=1,pathOffset:d=0,...u},m,l,p){if(K(t,u,m,p),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:x,dimensions:b}=t;h.transform&&(b&&(x.transform=h.transform),delete h.transform),b&&(a!==void 0||o!==void 0||x.transform)&&(x.transformOrigin=Je(b,a!==void 0?a:.5,o!==void 0?o:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&tn(h,i,c,d,!1)};let pt;pt=()=>({...mt(),attrs:{}}),et=t=>typeof t=="string"&&t.toLowerCase()==="svg";function en(t,e,n,r){const a=s.useMemo(()=>{const o=pt();return tt(o,e,{enableHardwareAcceleration:!1},et(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Zt(o,t.style,t),a.style={...o,...a.style}}return a}function nn(t=!1){return(e,n,r,{latestValues:a},o)=>{const i=(nt(e)?en:Ue)(n,a,o,e),c={...Ge(n,typeof e=="string",t),...i,ref:r},{children:d}=n,u=s.useMemo(()=>C(d)?d.get():d,[d]);return s.createElement(e,{...c,children:u})}}Mt=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Ct=function(t,{style:e,vars:n},r,a){Object.assign(t.style,e,a&&a.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])},Rt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),At=function(t,e,n,r){Ct(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(Rt.has(a)?a:Mt(a),e.attrs[a])},Q=function(t,e){const{style:n}=t,r={};for(const a in n)(C(n[a])||e.style&&C(e.style[a])||$t(a,t))&&(r[a]=n[a]);return r},St=function(t,e){const n=Q(t,e);for(const r in t)if(C(t[r])||C(e[r])){const a=L.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[a]=t[r]}return n},It=function(t,e,n,r={},a={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,a)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,a)),e},at=function(t){const e=s.useRef(null);return e.current===null&&(e.current=t()),e.current};let Gt;vt=t=>Array.isArray(t),Gt=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Pe=t=>vt(t)?t[t.length-1]||0:t;function rn(t){const e=C(t)?t.get():t;return Gt(e)?e.toValue():e}function an({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,a,o){const i={latestValues:sn(r,a,o,t),renderState:e()};return n&&(i.mount=c=>n(r,c,i)),i}const Jt=t=>(e,n)=>{const r=s.useContext(T),a=s.useContext(Y),o=()=>an(t,e,r,a);return n?o():at(o)};function sn(t,e,n,r){const a={},o=r(t,{});for(const p in o)a[p]=rn(o[p]);let{initial:i,animate:c}=t;const d=H(t),u=wt(t);e&&u&&!d&&t.inherit!==!1&&(i===void 0&&(i=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||i===!1;const l=m?c:i;return l&&typeof l!="boolean"&&!it(l)&&(Array.isArray(l)?l:[l]).forEach(p=>{const h=It(t,p);if(!h)return;const{transitionEnd:x,transition:b,...S}=h;for(const E in S){let g=S[E];if(Array.isArray(g)){const w=m?g.length-1:0;g=g[w]}g!==null&&(a[E]=g)}for(const E in x)a[E]=x[E]}),a}const on={useVisualState:Jt({scrapeMotionValuesFromProps:St,createRenderState:pt,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}tt(n,r,{enableHardwareAcceleration:!1},et(e.tagName),t.transformTemplate),At(e,n)}})},cn={useVisualState:Jt({scrapeMotionValuesFromProps:Q,createRenderState:mt})};function un(t,{forwardMotionProps:e=!1},n,r){return{...nt(t)?on:cn,preloadedFeatures:n,useRender:nn(e),createVisualElement:r,Component:t}}function ln(t){let e=[],n=[],r=0,a=!1,o=!1;const i=new WeakSet,c={schedule:(d,u=!1,m=!1)=>{const l=m&&a,p=l?e:n;return u&&i.add(d),p.indexOf(d)===-1&&(p.push(d),l&&a&&(r=e.length)),d},cancel:d=>{const u=n.indexOf(d);u!==-1&&n.splice(u,1),i.delete(d)},process:d=>{if(a){o=!0;return}if(a=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let u=0;u<r;u++){const m=e[u];m(d),i.has(m)&&(c.schedule(m),t())}a=!1,o&&(o=!1,c.process(d))}};return c}let Kt;_={delta:0,timestamp:0,isProcessing:!1},Kt=40;let ht=!0,O=!1,z,U,Qt,gt,te;z=["read","update","preRender","render","postRender"],U=z.reduce((t,e)=>(t[e]=ln(()=>O=!0),t),{}),Qt=t=>U[t].process(_),gt=t=>{O=!1,_.delta=ht?1e3/60:Math.max(Math.min(t-_.timestamp,Kt),1),_.timestamp=t,_.isProcessing=!0,z.forEach(Qt),_.isProcessing=!1,O&&(ht=!1,requestAnimationFrame(gt))},te=()=>{O=!0,ht=!0,_.isProcessing||requestAnimationFrame(gt)},jt=z.reduce((t,e)=>{const n=U[e];return t[e]=(r,a=!1,o=!1)=>(O||te(),n.schedule(r,a,o)),t},{}),Ce=function(t){z.forEach(e=>U[e].cancel(t))};const ee=$e(un);function ne(){const t=s.useRef(!1);return V(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function fn(){const t=ne(),[e,n]=s.useState(0),r=s.useCallback(()=>{t.current&&n(e+1)},[e]);return[s.useCallback(()=>jt.postRender(r),[r]),e]}class dn extends s.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function mn({children:t,isPresent:e}){const n=s.useId(),r=s.useRef(null),a=s.useRef({width:0,height:0,top:0,left:0});return s.useInsertionEffect(()=>{const{width:o,height:i,top:c,left:d}=a.current;if(e||!r.current||!o||!i)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${i}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),s.createElement(dn,{isPresent:e,childRef:r,sizeRef:a},s.cloneElement(t,{ref:r}))}const yt=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:o,mode:i})=>{const c=at(pn),d=s.useId(),u=s.useMemo(()=>({id:d,initial:e,isPresent:n,custom:a,onExitComplete:m=>{c.set(m,!0);for(const l of c.values())if(!l)return;r&&r()},register:m=>(c.set(m,!1),()=>c.delete(m))}),o?void 0:[n]);return s.useMemo(()=>{c.forEach((m,l)=>c.set(l,!1))},[n]),s.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),i==="popLayout"&&(t=s.createElement(mn,{isPresent:n},t)),s.createElement(Y.Provider,{value:u},t)};function pn(){return new Map}function hn(t){return s.useEffect(()=>()=>t(),[])}const P=t=>t.key||"";function gn(t,e){t.forEach(n=>{const r=P(n);e.set(r,n)})}function yn(t){const e=[];return s.Children.forEach(t,n=>{s.isValidElement(n)&&e.push(n)}),e}const vn=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:a,presenceAffectsLayout:o=!0,mode:i="sync"})=>{const c=s.useContext(Bt).forceRender||fn()[0],d=ne(),u=yn(t);let m=u;const l=s.useRef(new Map).current,p=s.useRef(m),h=s.useRef(new Map).current,x=s.useRef(!0);if(V(()=>{x.current=!1,gn(u,h),p.current=m}),hn(()=>{x.current=!0,h.clear(),l.clear()}),x.current)return s.createElement(s.Fragment,null,m.map(g=>s.createElement(yt,{key:P(g),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:i},g)));m=[...m];const b=p.current.map(P),S=u.map(P),E=b.length;for(let g=0;g<E;g++){const w=b[g];S.indexOf(w)===-1&&!l.has(w)&&l.set(w,void 0)}return i==="wait"&&l.size&&(m=[]),l.forEach((g,w)=>{if(S.indexOf(w)!==-1)return;const y=h.get(w);if(!y)return;const k=b.indexOf(w);let M=g;if(!M){const An=()=>{h.delete(w),l.delete(w);const Pn=p.current.findIndex(kn=>kn.key===w);if(p.current.splice(Pn,1),!l.size){if(p.current=u,d.current===!1)return;c(),r&&r()}};M=s.createElement(yt,{key:P(y),isPresent:!1,onExitComplete:An,custom:e,presenceAffectsLayout:o,mode:i},y),l.set(w,M)}m.splice(k,0,M)}),m=m.map(g=>{const w=g.key;return l.has(w)?g:s.createElement(yt,{key:P(g),isPresent:!0,presenceAffectsLayout:o,mode:i},g)}),s.createElement(s.Fragment,null,l.size?m:m.map(g=>s.cloneElement(g)))};var xn="_19keaci0",wn="_19keaci1",bn="_19keaci2";const En=s.lazy(()=>j(()=>import("./Message-4496e9ec.js").then(async t=>(await t.__tla,t)),["assets/Message-4496e9ec.js","assets/index-21dc63e8.js","assets/react-f96d03bb.js","assets/index-a1efbfbf.css","assets/clsx.m-1229b3e0.js","assets/react-error-boundary.esm-3e5feee4.js","assets/Message-9c459fa1.css"])),_n=s.lazy(()=>j(()=>import("./Animation-ab7c3fbd.js").then(async t=>(await t.__tla,t)),["assets/Animation-ab7c3fbd.js","assets/index-21dc63e8.js","assets/react-f96d03bb.js","assets/index-a1efbfbf.css","assets/BotArea-f5f41e39.js","assets/BotArea-644997c1.css","assets/Layout-a403add4.js","assets/Layout-483655aa.css"])),Cn=({data:t,isGenerating:e,MessageRenderer:n,onHeightChange:r})=>{const{id:a,intro:o,messages:i}=t,c=s.useRef(null),d=s.useMemo(()=>({id:pe(),role:"assistant",content:o,updatedAt:Date.now()}),[o]);return je(c,u=>{r?.(u.contentRect.height)},e),v.jsx("div",{className:xn,children:v.jsx("div",{className:wn,ref:c,children:v.jsxs(_n,{children:[v.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},children:v.jsx(En,{className:bn,data:d})},a),v.jsx(vn,{children:i.map(u=>v.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},children:v.jsx(n,{id:u})},u))})]})})})};var Rn="_1q3thl81",Sn="_1q3thl80";let re,ae,se,oe,ie,ce;re=s.lazy(()=>j(()=>import("./TimeStack-1195ca42.js").then(async t=>(await t.__tla,t)),["assets/TimeStack-1195ca42.js","assets/index-21dc63e8.js","assets/react-f96d03bb.js","assets/index-a1efbfbf.css","assets/BotArea-f5f41e39.js","assets/BotArea-644997c1.css","assets/TimeStack-343f3abd.css"])),ae=s.lazy(()=>j(()=>import("./Message-4496e9ec.js").then(async t=>(await t.__tla,t)),["assets/Message-4496e9ec.js","assets/index-21dc63e8.js","assets/react-f96d03bb.js","assets/index-a1efbfbf.css","assets/clsx.m-1229b3e0.js","assets/react-error-boundary.esm-3e5feee4.js","assets/Message-9c459fa1.css"])),se=s.lazy(()=>j(()=>import("./ConfirmDialog-2b2e3c95.js").then(async t=>(await t.__tla,t)),["assets/ConfirmDialog-2b2e3c95.js","assets/index-21dc63e8.js","assets/react-f96d03bb.js","assets/index-a1efbfbf.css","assets/BotArea-f5f41e39.js","assets/BotArea-644997c1.css","assets/clsx.m-1229b3e0.js","assets/ConfirmDialog-77c6835a.css"])),oe=s.lazy(()=>j(()=>import("./ChatMessageEditor-7fb6218c.js").then(async t=>(await t.__tla,t)).then(t=>t.v),["assets/ChatMessageEditor-7fb6218c.js","assets/index-21dc63e8.js","assets/react-f96d03bb.js","assets/index-a1efbfbf.css","assets/objectWithoutPropertiesLoose-4f48578a.js","assets/react-error-boundary.esm-3e5feee4.js","assets/ChatMessageEditor-aa9a6d77.css"])),ie=({id:t})=>{const[e]=Dt(t);return v.jsx(s.Suspense,{children:!!e?.content&&v.jsx(ae,{data:e})})},ce=({botName:t,chatID:e})=>{const n=s.useRef(null),r=q(de),[a]=ct(e),[o,i]=s.useState(G.None()),[c]=zt(fe),d=q(Tn),u=D(Vn),m=D(In),l=D(On),p=D(zn),h=D(Dn),x=q(Wn),b=s.useMemo(()=>{if(x.isNone())return!1;const y=x.get();return y.type==="pending"&&y.chatID===e},[x,e]),S=s.useCallback(()=>{const y=r.initChat();m(y)},[m,r]),E=s.useCallback(y=>{c().size===1||!he(y)||(ge.replace("BotNewChat",{botName:t}),p(y))},[t,c,p]),g=s.useCallback(y=>{const k={id:pe(),content:y,role:"user",updatedAt:Date.now()};u(k),l(e,M=>{M.messages.push(k.id)}),h(e)},[u,e,h,l]),w=s.useMemo(()=>v.jsx(re,{items:d,renderItemIcon:y=>v.jsx(Nn,{style:{flexShrink:0},as:Le,color:e===y?"#fff":jn.colors.text}),newItemName:"New chat",selected:e,disableMutation:b,onItemClick:y=>{ge.push("BotChat",{botName:t,chatID:y})},onItemAdd:S,onItemRemove:y=>{he(y)&&i(G.Some(y))}}),[t,e,b,S,d]);return a?v.jsxs(Fn,{asideHeader:t,aside:w,header:v.jsx(Wt,{id:"chat-title",value:a.title,placeholder:"Untitled",onChange:y=>{l(e,k=>{k.title=y.currentTarget.value})}}),children:[v.jsx("div",{ref:n,className:Sn,children:v.jsx(Cn,{data:a,isGenerating:b,MessageRenderer:ie,onHeightChange:()=>{n.current?.scrollTo({top:n.current.scrollHeight})}})}),v.jsx("div",{className:Rn,children:v.jsx(oe,{id:e,onComplete:g,shouldSend:!b})}),v.jsx(se,{title:"Remove chat",description:"Are you sure you want to remove this chat?",confirmLabel:"Remove",danger:!0,open:o.isSome(),onClose:()=>i(G.None()),onConfirm:()=>{o.isNone()||(E(o.get()),i(G.None()))}})]}):v.jsx(Ln,{to:`/bots/${t}/new`})},ve=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}))});export{vt as A,xt as B,W as C,ye as D,L as E,J as F,H as G,wt as H,bt as I,B as J,Et as K,_t as L,K as M,Q as N,Ct as O,Rt as P,St as Q,tt as R,At as S,et as T,nt as U,Pt as V,rt as W,at as X,kt as Y,st as Z,ve as _,Yn as __tla,xe as a,we as b,Mt as c,be as d,N as e,jt as f,Lt as g,Ee as h,Tt as i,_e as j,Ce as k,_ as l,Vt as m,$ as n,C as o,F as p,f as q,It as r,Re as s,ot as t,Ot as u,R as v,Se as w,Ae as x,Pe as y,it as z};
